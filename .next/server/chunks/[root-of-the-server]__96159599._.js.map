{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///Users/jangajdos/Desktop/swbeauty3/swbeauty-bun/src/app/api/pricelist/route.ts"],"sourcesContent":["import { promises as fs } from 'node:fs'\nimport path from 'node:path'\nimport type { PriceItem } from '@/types'\nimport { NextResponse } from 'next/server'\n\nfunction parseCSV(text: string): PriceItem[] {\n  const cleaned = text.replace(/\\ufeff/g, '')\n  const lines = cleaned.split(/\\r?\\n/).filter((l) => l.trim().length > 0)\n  if (lines.length < 2) return []\n\n  const parseLine = (line: string): string[] => {\n    const out: string[] = []\n    let cur = ''\n    let inQuotes = false\n    for (let i = 0; i < line.length; i++) {\n      const ch = line[i]\n      if (ch === '\"') {\n        if (inQuotes && line[i + 1] === '\"') {\n          cur += '\"'\n          i++\n        } else {\n          inQuotes = !inQuotes\n        }\n      } else if (ch === ',' && !inQuotes) {\n        out.push(cur)\n        cur = ''\n      } else {\n        cur += ch\n      }\n    }\n    out.push(cur)\n    return out.map((s) => s.trim())\n  }\n\n  const header = parseLine(lines[0])\n  const idx = (name: string) => header.indexOf(name)\n\n  const res: PriceItem[] = []\n  for (let l = 1; l < lines.length; l++) {\n    const cols = parseLine(lines[l])\n    const item: PriceItem = {\n      CategoryId: cols[idx('CategoryId')] ?? '',\n      CategoryName: cols[idx('CategoryName')] ?? '',\n      PackageName: cols[idx('PackageName')] ?? '',\n      Price: cols[idx('Price')] ?? '',\n      Sessions: cols[idx('Sessions')] ?? '',\n      Description: cols[idx('Description')] ?? '',\n    }\n    if (item.CategoryId || item.CategoryName || item.PackageName) {\n      res.push(item)\n    }\n  }\n  return res\n}\n\nexport async function GET() {\n  try {\n    const file = path.join(process.cwd(), 'public', 'pricelist.csv')\n    const csv = await fs.readFile(file, 'utf-8')\n    const items = parseCSV(csv)\n    return NextResponse.json(items)\n  } catch (_error) {\n    return NextResponse.json({ error: 'Failed to load pricelist' }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AAEA;;;;AAEA,SAAS,SAAS,IAAY;IAC5B,MAAM,UAAU,KAAK,OAAO,CAAC,WAAW;IACxC,MAAM,QAAQ,QAAQ,KAAK,CAAC,SAAS,MAAM,CAAC,CAAC,IAAM,EAAE,IAAI,GAAG,MAAM,GAAG;IACrE,IAAI,MAAM,MAAM,GAAG,GAAG,OAAO,EAAE;IAE/B,MAAM,YAAY,CAAC;QACjB,MAAM,MAAgB,EAAE;QACxB,IAAI,MAAM;QACV,IAAI,WAAW;QACf,IAAK,IAAI,IAAI,GAAG,IAAI,KAAK,MAAM,EAAE,IAAK;YACpC,MAAM,KAAK,IAAI,CAAC,EAAE;YAClB,IAAI,OAAO,KAAK;gBACd,IAAI,YAAY,IAAI,CAAC,IAAI,EAAE,KAAK,KAAK;oBACnC,OAAO;oBACP;gBACF,OAAO;oBACL,WAAW,CAAC;gBACd;YACF,OAAO,IAAI,OAAO,OAAO,CAAC,UAAU;gBAClC,IAAI,IAAI,CAAC;gBACT,MAAM;YACR,OAAO;gBACL,OAAO;YACT;QACF;QACA,IAAI,IAAI,CAAC;QACT,OAAO,IAAI,GAAG,CAAC,CAAC,IAAM,EAAE,IAAI;IAC9B;IAEA,MAAM,SAAS,UAAU,KAAK,CAAC,EAAE;IACjC,MAAM,MAAM,CAAC,OAAiB,OAAO,OAAO,CAAC;IAE7C,MAAM,MAAmB,EAAE;IAC3B,IAAK,IAAI,IAAI,GAAG,IAAI,MAAM,MAAM,EAAE,IAAK;QACrC,MAAM,OAAO,UAAU,KAAK,CAAC,EAAE;QAC/B,MAAM,OAAkB;YACtB,YAAY,IAAI,CAAC,IAAI,cAAc,IAAI;YACvC,cAAc,IAAI,CAAC,IAAI,gBAAgB,IAAI;YAC3C,aAAa,IAAI,CAAC,IAAI,eAAe,IAAI;YACzC,OAAO,IAAI,CAAC,IAAI,SAAS,IAAI;YAC7B,UAAU,IAAI,CAAC,IAAI,YAAY,IAAI;YACnC,aAAa,IAAI,CAAC,IAAI,eAAe,IAAI;QAC3C;QACA,IAAI,KAAK,UAAU,IAAI,KAAK,YAAY,IAAI,KAAK,WAAW,EAAE;YAC5D,IAAI,IAAI,CAAC;QACX;IACF;IACA,OAAO;AACT;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,OAAO,4HAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,UAAU;QAChD,MAAM,MAAM,MAAM,yHAAE,CAAC,QAAQ,CAAC,MAAM;QACpC,MAAM,QAAQ,SAAS;QACvB,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,QAAQ;QACf,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA2B,GAAG;YAAE,QAAQ;QAAI;IAChF;AACF","debugId":null}}]
}